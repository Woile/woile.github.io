<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="assets/xml/rss.xsl" media="all"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Willy's blog</title><link>https://woile.github.io/</link><description>Personal blog about software development, travel and sports</description><atom:link type="application/rss+xml" rel="self" href="https://woile.github.io/rss.xml"></atom:link><language>en</language><lastBuildDate>Mon, 06 Mar 2017 17:13:10 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>How to filter Polymorphic Models with Django Filters</title><link>https://woile.github.io/posts/django-polymorphic-integration-with-django-filters/</link><dc:creator>Woile</dc:creator><description>&lt;div&gt;&lt;p&gt;As the title says, I needed a way to filter my polymorphic models using my already defined
&lt;code&gt;rest_framework.FilterSet&lt;/code&gt;, and as I didn't find much resources about it I'm sharing my experience here.&lt;/p&gt;
&lt;p&gt;First, let's talk about &lt;code&gt;django-polymorphic&lt;/code&gt; and &lt;code&gt;django-filters&lt;/code&gt;, what are these libraries for.&lt;/p&gt;
&lt;div class="section" id="django-polymorphic"&gt;
&lt;h2&gt;Django-polymorphic &lt;a class="footnote-reference" href="https://woile.github.io/posts/django-polymorphic-integration-with-django-filters/#id3" id="id1"&gt;[1]&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="literal-block"&gt;
Simplifies using inherited models in Django projects. When a query is made at the base
model, the inherited model classes are returned.
&lt;/pre&gt;
&lt;p&gt;One of the most important things to understand of polymorphic is, that when you ask for the queryset of the parent, every element is represented with its children classes. Let's see this.&lt;/p&gt;
&lt;p&gt;I'll use the models examples provided by the &lt;a class="reference external" href="https://django-polymorphic.readthedocs.io/en/stable/"&gt;docs&lt;/a&gt;.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;polymorphic.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;PolymorphicModel&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Project&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PolymorphicModel&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;topic&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-5"&gt;&lt;/a&gt;    &lt;span class="n"&gt;start_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DateField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;null&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;blank&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-6"&gt;&lt;/a&gt;    &lt;span class="n"&gt;finish_date&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DateField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;null&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;blank&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-7"&gt;&lt;/a&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ArtProject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-9"&gt;&lt;/a&gt;    &lt;span class="n"&gt;artist&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-10"&gt;&lt;/a&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-11"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ResearchProject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_b37ef704a1d24ef39a9a4d2fd3839ff0-12"&gt;&lt;/a&gt;    &lt;span class="n"&gt;supervisor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharField&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code python"&gt;&lt;a name="rest_code_90c8abdf105c4f699c649b2d9f625f27-1"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;topic&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"Department Party"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_90c8abdf105c4f699c649b2d9f625f27-2"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ArtProject&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;topic&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"Painting with Tim"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;artist&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"T. Turner"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_90c8abdf105c4f699c649b2d9f625f27-3"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ResearchProject&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;topic&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"Swallow Aerodynamics"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;supervisor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"Dr. Winter"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code python"&gt;&lt;a name="rest_code_e150364879734b39afa297d45ae46718-1"&gt;&lt;/a&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a name="rest_code_e150364879734b39afa297d45ae46718-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="nb"&gt;id&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;topic&lt;/span&gt; &lt;span class="s2"&gt;"Department Party"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e150364879734b39afa297d45ae46718-3"&gt;&lt;/a&gt;  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ArtProject&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;      &lt;span class="nb"&gt;id&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;topic&lt;/span&gt; &lt;span class="s2"&gt;"Painting with Tim"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;artist&lt;/span&gt; &lt;span class="s2"&gt;"T. Turner"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e150364879734b39afa297d45ae46718-4"&gt;&lt;/a&gt;  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ResearchProject&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;id&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;topic&lt;/span&gt; &lt;span class="s2"&gt;"Swallow Aerodynamics"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;supervisor&lt;/span&gt; &lt;span class="s2"&gt;"Dr. Winter"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;As you can see, this can be really helpful when using Django Rest Framework (DRF) and model inheritance.
It allows to use just one model, in this case &lt;code&gt;Project&lt;/code&gt;, in a &lt;code&gt;ModelViewSet&lt;/code&gt; and you will receive all the instances for &lt;code&gt;Project&lt;/code&gt;, &lt;code&gt;ArtProject&lt;/code&gt; and &lt;code&gt;ResearchProject&lt;/code&gt;. Take into account
that your serializer will have to handle the representation of each of the models.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="django-filter"&gt;
&lt;h2&gt;Django-filter &lt;a class="footnote-reference" href="https://woile.github.io/posts/django-polymorphic-integration-with-django-filters/#id4" id="id2"&gt;[2]&lt;/a&gt;&lt;/h2&gt;
&lt;pre class="literal-block"&gt;
Is a generic, reusable application to alleviate writing some of the more mundane bits of view code. Specifically, it allows users to filter down a queryset based on a model’s fields.
&lt;/pre&gt;
&lt;p&gt;Fundamentally, when using django filters you'll want to create a class specifying the model's
fields by which a queryset can be filtered.&lt;/p&gt;
&lt;p&gt;Let's modified a bit the example of the &lt;a class="reference external" href="https://django-filter.readthedocs.io/en/latest/guide/usage.html"&gt;docs&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;django_filters&lt;/span&gt;
&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ProjectFilter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;django_filters&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FilterSet&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;topic&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;django_filters&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CharFilter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lookup_expr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'iexact'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-5"&gt;&lt;/a&gt;
&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Meta&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-7"&gt;&lt;/a&gt;        &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Project&lt;/span&gt;
&lt;a name="rest_code_758b2099931d4c5ba8138a5f3d4d6e4a-8"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fields&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'start_date'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'finish_date'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;And the view should look something like:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_224dadcdfae24e48acbed2fc94068704-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;project_list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_224dadcdfae24e48acbed2fc94068704-2"&gt;&lt;/a&gt;    &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ProjectFilter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;objects&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;a name="rest_code_224dadcdfae24e48acbed2fc94068704-3"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'my_app/template.html'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;'filter'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Obviously, this will help reduce the amount of code written, and will be way easier to mantain.
The good thing about this library, and what matters to me the most, is that it has a great &lt;a class="reference external" href="https://django-filter.readthedocs.io/en/latest/guide/rest_framework.html"&gt;integration with DRF&lt;/a&gt; by providing a DRF-specific FilterSet and a filter backend.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="filtering-by-a-polymorphic-model"&gt;
&lt;h2&gt;Filtering by a polymorphic model&lt;/h2&gt;
&lt;p&gt;As we stated at the beginning what I wanted to do is filter by a &lt;strong&gt;polymorphic model&lt;/strong&gt;, because we have different types of projects. This can be easily achieved by reading the docs, no seriously, by essentially using the &lt;code&gt;rest_framework.FilterSet&lt;/code&gt; and using a customized filter with &lt;a class="reference external" href="https://django-filter.readthedocs.io/en/latest/guide/usage.html#customize-filtering-with-filter-method"&gt;Filter.method&lt;/a&gt; in our FilterSet.&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;django_filters&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-2"&gt;&lt;/a&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;PROJECT_CHOICES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-4"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'project'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Project&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-5"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'art_project'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ArtProject&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-6"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'research_project'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ResearchProject&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-7"&gt;&lt;/a&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-8"&gt;&lt;/a&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-9"&gt;&lt;/a&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ProjectFilter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;django_filters&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rest_framework&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FilterSet&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-10"&gt;&lt;/a&gt;    &lt;span class="n"&gt;project_type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;django_filters&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MultipleChoiceFilter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'project_type_filter'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-11"&gt;&lt;/a&gt;                                                       &lt;span class="n"&gt;choices&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;PROJECT_CHOICES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-12"&gt;&lt;/a&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-13"&gt;&lt;/a&gt;    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Meta&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-14"&gt;&lt;/a&gt;        &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Project&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-15"&gt;&lt;/a&gt;        &lt;span class="n"&gt;fields&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'topic'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'start_date'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'end_date'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-16"&gt;&lt;/a&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-17"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;project_type_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-18"&gt;&lt;/a&gt;        &lt;span class="n"&gt;project_klasses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;PROJECT_CHOICES&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a name="rest_code_4b3f4c4d525b47b6aed009b8f31224e2-19"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;queryset&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;instance_of&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;project_klasses&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Now, if our querystring includes a key &lt;code&gt;project_type&lt;/code&gt;, it will check if the values match any of
the choices and it will return the queryset filtered by the specified choices.
And that's it, we have successfully filtered polymorphic models. Now we just need to add &lt;code&gt;ProjectFilter`to the :code:`filter_class&lt;/code&gt; in the &lt;code&gt;viewsets.ModelViewSet&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Cheers!&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="id3" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="https://woile.github.io/posts/django-polymorphic-integration-with-django-filters/#id1"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a class="reference external" href="https://github.com/django-polymorphic/django-polymorphic"&gt;https://github.com/django-polymorphic/django-polymorphic&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="id4" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label"&gt;&lt;col&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="https://woile.github.io/posts/django-polymorphic-integration-with-django-filters/#id2"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a class="reference external" href="https://github.com/carltongibson/django-filter"&gt;https://github.com/carltongibson/django-filter&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>api</category><category>django</category><category>django-rest-framework</category><category>drf</category><category>filters</category><category>polymorphic</category><category>python</category><guid>https://woile.github.io/posts/django-polymorphic-integration-with-django-filters/</guid><pubDate>Thu, 02 Mar 2017 23:58:22 GMT</pubDate></item><item><title>Eurotrip 2016</title><link>https://woile.github.io/posts/eurotrip-2016/</link><dc:creator>Woile</dc:creator><description>&lt;div&gt;&lt;div class="youtube-video align-center"&gt;
&lt;iframe width="640" height="360" src="https://www.youtube.com/embed/I3UGBamgnQU?rel=0&amp;amp;hd=1&amp;amp;wmode=transparent"&gt;&lt;/iframe&gt;
&lt;/div&gt;&lt;p&gt;Hi guys, from may to november 2016, I've been traveling around Europe with some friends. I wanted to share some insight about our trip.&lt;/p&gt;
&lt;p&gt;First, I would like to start with some numbers:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;720 litres&lt;/strong&gt; of beer were drunk (around 2 lt per day per person during 3 months on average)&lt;/p&gt;
&lt;p&gt;41 cities, &lt;strong&gt;13 countries&lt;/strong&gt; visited.&lt;/p&gt;
&lt;p&gt;12 airplanes, 10 buses, 6 trains, 2 ferries.&lt;/p&gt;
&lt;p&gt;5 different seas, 1 ocean&lt;/p&gt;
&lt;p&gt;Countles hours of sun&lt;/p&gt;
&lt;p&gt;Cheapest country: &lt;strong&gt;Hungary&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Most expensive: &lt;strong&gt;London&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Best activity: &lt;strong&gt;Surf&lt;/strong&gt; (Don't miss it if you have the opportunity)&lt;/p&gt;
&lt;iframe src="https://www.google.com/maps/d/embed?mid=1vkZK3ktJAtiDy2LnK_-Yzxq928E" width="640" height="480"&gt;&lt;/iframe&gt;&lt;div class="section" id="friends"&gt;
&lt;h2&gt;Friends&lt;/h2&gt;
&lt;p&gt;We met a lot of people, never had a problem with anyone, all of them were wonderful, except maybe a racist drunk swedish in Denmark, that was weird, but he didn't do anything to us, just complaining about random stuff.&lt;/p&gt;
&lt;p&gt;If I had to make a recommendation, I'd say go to hostels in Spain and Portugal, because there you'll find the most relaxed environment and people willing to join you in an adventure. And please give an opportunity to couchsurfing, we didn't use it much, till the end, and we had a great experience, really warm people.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="money"&gt;
&lt;h2&gt;Money&lt;/h2&gt;
&lt;p&gt;If you are wondering how much we spent, we used an easy rule. We calculated an average of USD 50 per day. Yes, that includes transportation (planes, buses, trains, etc), food and shelter.&lt;/p&gt;
&lt;p&gt;How does this work? Well it's easy. First of all, housing is usually around USD 20, probably you'll find some places around USD 10 and sometimes USD 40, but, and let me focus on this word, the AVERAGE was USD 20.&lt;/p&gt;
&lt;p&gt;Second, food. Let's be generous, and set USD 10 for food, which is a lot if you cook your own meals.&lt;/p&gt;
&lt;p&gt;So, let's use 15 USD for transportation, but we are not going to be moving everyday, so you can sum it.
Doing some math, we were abroad for 90 days, with 15 USD for transportation every day, it's USD 1350 available to move, without taking into account the continental flights, it's around USD 52 per transport.&lt;/p&gt;
&lt;p&gt;What do we do with the USD 5 left? Well it's USD 450 to spend in museums and going out, use it wisely.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="exploring-cities"&gt;
&lt;h2&gt;Exploring cities&lt;/h2&gt;
&lt;p&gt;Okay, we didn't had much money to pay expensive tours, so we usually went to the free tours. They are in every city, and you pay what you want, after the tour, and if you don't like it, just leave.&lt;/p&gt;
&lt;p&gt;They usually spam their other payed tours, but the important thing is that you get to know some worthy places to visit, like the Hofbräuhaus München. And you learn some history of the place.&lt;/p&gt;
&lt;p&gt;Another important source of information are the &lt;a class="reference external" href="https://www.use-it.travel/home/"&gt;USE-IT maps&lt;/a&gt;. which are made by locals (or that's what they say). They explain some traditions of the city, where to go, and where not to go. You can download them or check where to get them, and the best part is that... it's FREE.&lt;/p&gt;
&lt;img src="https://woile.github.io/galleries/greece/glyfada/GOPR3079.JPG"&gt;&lt;/div&gt;
&lt;div class="section" id="transportation-sources"&gt;
&lt;h2&gt;Transportation sources&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.blablacar.es/"&gt;Blablacar&lt;/a&gt;.
It's for car pooling, someone is going somewhere, and, having some free seats, they are offered in this platform.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://woile.github.io/posts/eurotrip-2016/www.goeuro.com"&gt;Goeuro&lt;/a&gt;.
Includes many transportation systems, train, bus, plane, car pooling. We used mostly for buses.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://woile.github.io/posts/eurotrip-2016/www.google.com/flights/"&gt;Google Flights&lt;/a&gt;.
It's the best search engine for flights, allowing to track specific flights or dates.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="acommodation-sources"&gt;
&lt;h2&gt;Acommodation sources&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.airbnb.com.ar/"&gt;AirBnb&lt;/a&gt;.
Renting appartments&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.hostelworld.com/"&gt;HostelWorld&lt;/a&gt;.
Renting beds in hostels&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.couchsurfing.com/"&gt;Couchsurfing&lt;/a&gt;.
Going for free to someone's place. We did it once in Milan and we had a great experience.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="bottom-line"&gt;
&lt;h2&gt;Bottom line&lt;/h2&gt;
&lt;p&gt;I encourage you to don't miss the opportunity to travel and meet new friends, you won't regret at all.&lt;/p&gt;
&lt;p&gt;Happy new year!&lt;/p&gt;
&lt;p&gt;Santi&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>europe</category><category>eurotrip</category><category>friends</category><category>gopro</category><category>trip</category><guid>https://woile.github.io/posts/eurotrip-2016/</guid><pubDate>Sun, 08 Jan 2017 15:30:53 GMT</pubDate></item><item><title>Get Skype working on Debian Stretch x64 with GNOME3</title><link>https://woile.github.io/posts/get-skype-working-on-debian-stretch-x64-with-gnome3/</link><dc:creator>Woile</dc:creator><description>&lt;div&gt;&lt;p&gt;If you really need to install this software, and you cannot use an alternative like &lt;strong&gt;hangouts&lt;/strong&gt;, or &lt;strong&gt;tox&lt;/strong&gt;, then this guide is for you.&lt;/p&gt;
&lt;p&gt;I got tired of installing skype so many times looking all over the internet, so I'll leave here some easy steps to make it work in Debian Stretch with GNOME 3.21 (and may be some earlier versions). It's just that there is not enough information around.
Debian recommends to install the .deb package, but it usually does not work.&lt;/p&gt;
&lt;p&gt;As you probably know, skype is a 32bit software, so we'll need to enable that in our repository manager. Next we'll install some dependencies and finally we'll get the file in the specified folder.&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_4cecb2e1cb9846f0b7235d3f32e649a0-1"&gt;&lt;/a&gt;sudo dpkg --add-architecture i386
&lt;a name="rest_code_4cecb2e1cb9846f0b7235d3f32e649a0-2"&gt;&lt;/a&gt;sudo apt-get install libxv1:i386 libqtdbus4:i386 libqtwebkit4:i386 libxss1:i386
&lt;a name="rest_code_4cecb2e1cb9846f0b7235d3f32e649a0-3"&gt;&lt;/a&gt;mkdir ~/.apps/
&lt;a name="rest_code_4cecb2e1cb9846f0b7235d3f32e649a0-4"&gt;&lt;/a&gt;wget -qO- https://download.skype.com/linux/skype-4.3.0.37.tar.bz2 &lt;span class="p"&gt;|&lt;/span&gt; tar jx -C ~/.apps/
&lt;/pre&gt;&lt;p&gt;Instead of launching the &lt;code&gt;./skype&lt;/code&gt; script, you can add a &lt;code&gt;skype.desktop&lt;/code&gt; file to your gnome environment.&lt;/p&gt;
&lt;p&gt;The location for this file is either &lt;code&gt;~/.local/share/applications&lt;/code&gt;, for the current user, or &lt;code&gt;/usr/share/applications&lt;/code&gt; for everyone.&lt;/p&gt;
&lt;p&gt;The content for your &lt;code&gt;skype.desktop&lt;/code&gt;, should be something like this:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-1"&gt;&lt;/a&gt;&lt;span class="o"&gt;[&lt;/span&gt;Desktop Entry&lt;span class="o"&gt;]&lt;/span&gt;
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-2"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Skype
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-3"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Comment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Skype Internet Telephony
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-4"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Exec&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/home/**santiago**/.apps/skype-4.3.0.37/skype
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-5"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Icon&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/home/**santiago**/.apps/skype-4.3.0.37/icons/SkypeBlue_96x96.png
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-6"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Terminal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-7"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Application
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-8"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;UTF-8
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-9"&gt;&lt;/a&gt;&lt;span class="nv"&gt;Categories&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Network&lt;span class="p"&gt;;&lt;/span&gt;Application&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-10"&gt;&lt;/a&gt;&lt;span class="nv"&gt;MimeType&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;x-scheme-handler/skype&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-11"&gt;&lt;/a&gt;X-KDE-Protocols&lt;span class="o"&gt;=&lt;/span&gt;skype
&lt;a name="rest_code_9567f22f80d54650bc150f2cd37911ce-12"&gt;&lt;/a&gt;X-GNOME-Bugzilla-Product&lt;span class="o"&gt;=&lt;/span&gt;skype
&lt;/pre&gt;&lt;p&gt;PS: Remember to change the user for the one you are using.&lt;/p&gt;
&lt;p&gt;Good luck!&lt;/p&gt;&lt;/div&gt;</description><category>debian</category><category>linux</category><category>skype</category><guid>https://woile.github.io/posts/get-skype-working-on-debian-stretch-x64-with-gnome3/</guid><pubDate>Mon, 19 Sep 2016 10:56:03 GMT</pubDate></item><item><title>Blog inauguration</title><link>https://woile.github.io/posts/blog-inauguration/</link><dc:creator>Woile</dc:creator><description>&lt;p&gt;I've decided to create this blog to share trip experiences,
software development, stuff interesting to me, and whatever I want.&lt;/p&gt;</description><category>init</category><guid>https://woile.github.io/posts/blog-inauguration/</guid><pubDate>Wed, 18 May 2016 04:01:40 GMT</pubDate></item></channel></rss>